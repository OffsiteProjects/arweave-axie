(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{HBti:function(t,e,a){"use strict";a.r(e);var n=a("k9sC"),i=a.n(n),s=a("h7sq"),o=a("tS02"),r=a("/XES"),p=a("ztBH"),c=a("vTWr"),h=a("Fayl"),l=a("znL5"),u=(a("I37H"),a("E9ye"),a("ERkP")),d=a.n(u),f=a("moHI"),v=a("Ml6p"),w=a.n(v),x=a("Dlp7"),b=function(t){var e,a,n,s,o,r,p,c,h,l,u,d,f,v,b;return i.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:return e=t.json,a=t.atlas,n=t.images,g.next=3,i.a.awrap(w.a.all([fetch(e),fetch(a)]));case 3:return s=g.sent,o=Object(x.a)(s,2),r=o[0],p=o[1],g.t0=i.a,g.t1=w.a,g.next=11,i.a.awrap(r.text());case 11:return g.t2=g.sent,g.next=14,i.a.awrap(p.text());case 14:return g.t3=g.sent,g.t4=[g.t2,g.t3],g.t5=g.t1.all.call(g.t1,g.t4),g.next=19,g.t0.awrap.call(g.t0,g.t5);case 19:return c=g.sent,h=Object(x.a)(c,2),l=h[0],u=h[1],d=new PIXI.spine.core.TextureAtlas(u,(function(t,e){e(PIXI.BaseTexture.from(n[t]))})),f=new PIXI.spine.core.AtlasAttachmentLoader(d),v=new PIXI.spine.core.SkeletonJson(f),b=v.readSkeletonData(l),g.abrupt("return",new PIXI.spine.Spine(b));case 28:case"end":return g.stop()}}))};a.d(e,"AxieFigure",(function(){return j}));var g=d.a.createElement,j=function(t){function e(t){var a;return Object(s.a)(this,e),a=Object(r.a)(this,Object(p.a)(e).call(this,t)),Object(l.a)(Object(c.a)(a),"app",void 0),Object(l.a)(Object(c.a)(a),"axie",void 0),Object(l.a)(Object(c.a)(a),"canvasContainer",void 0),Object(l.a)(Object(c.a)(a),"updateContainerSize",(function(){if(a.canvasContainer){var t=a.canvasContainer,e=t.offsetWidth,n=t.offsetHeight;a.app&&(a.app.view.style.width="".concat(e,"px"),a.app.view.style.height="".concat(n,"px"))}})),a.state={loading:!0},a}return Object(h.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){var t,e,a,n,s,o=this;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=this.props.figureScale,this.setState({loading:!0}),!this.canvasContainer){r.next=22;break}return e=this.canvasContainer,a=e.offsetWidth,n=e.offsetHeight,this.app=new PIXI.Application({transparent:!0,resolution:window.devicePixelRatio,autoStart:!0,width:a,height:n}),this.updateContainerSize(),r.next=8,i.a.awrap(b(this.props.resources));case 8:(s=r.sent).name="axie",this.axie=s,s.position.set(a/2,n-130),s.scale.set(t),s.pivot.set(-21,0),s.state.setAnimation(0,"action/idle",!0),this.app.loader.add("floor","/static/image/floor.png").on("complete",(function(){if(o.app){var t=o.app.loader.resources.floor.texture,e=new PIXI.Sprite(t);e.width=320,e.height=200,e.pivot.set(.5),e.position.set(a/2-160,n-230),e.name="floor",o.app.stage.addChild(e),o.app.stage.addChild(s)}})).load(),this.app.start(),this.canvasContainer.appendChild(this.app.view),window.onresize=this.updateContainerSize,this.setState({loading:!1}),this.props.onRefAxie&&this.props.onRefAxie(this.axie),this.props.onRefApp&&this.props.onRefApp(this.app);case 22:case"end":return r.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){this.app&&this.app.destroy()}},{key:"render",value:function(){var t=this,e=this.state.loading;return this.app&&this.axie&&this.axie.scale.set(this.props.figureScale),g("div",{ref:function(e){return t.canvasContainer=e},className:"relative pointer-events-none",style:this.props.style},e&&g(f.a,null))}}]),e}(d.a.Component)}}]);